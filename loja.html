
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ateli√™ da Lele - Loja</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* ===== CUSTOM STYLES ===== */
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #fce7f3 0%, #fdf2f8 100%);
        }
        
        .product-card {
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #ec4899 0%, #be185d 100%);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #be185d 0%, #9d174d 100%);
            transform: translateY(-2px);
        }
        
        .logo-text {
            background: linear-gradient(135deg, #ec4899, #be185d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .image-placeholder {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            position: relative;
            overflow: hidden;
        }
        
        .image-placeholder::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .loading-spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #ec4899;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <!-- ===== HEADER ===== -->
    <header class="bg-white/80 backdrop-blur-md shadow-lg sticky top-0 z-50">
        <nav class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <i class="fas fa-heart text-3xl text-pink-500"></i>
                    <h1 class="text-2xl font-bold logo-text">Ateli√™ da Lele</h1>
                </div>
                
                <div class="hidden md:flex items-center space-x-8">
                    <a href="index.html" class="text-gray-700 hover:text-pink-500 transition-colors font-medium">
                        <i class="fas fa-home mr-2"></i>Home
                    </a>
                    <a href="loja.html" class="text-pink-500 font-semibold">
                        <i class="fas fa-store mr-2"></i>Loja
                    </a>
                    <a href="portfolio.html" class="text-gray-700 hover:text-pink-500 transition-colors font-medium">
                        <i class="fas fa-images mr-2"></i>Portf√≥lio
                    </a>
                    <a href="sobre.html" class="text-gray-700 hover:text-pink-500 transition-colors font-medium">
                        <i class="fas fa-user mr-2"></i>Sobre
                    </a>
                    <a href="contato.html" class="text-gray-700 hover:text-pink-500 transition-colors font-medium">
                        <i class="fas fa-envelope mr-2"></i>Contato
                    </a>
                </div>
                
                <!-- Mobile Menu Button -->
                <button id="mobileMenuBtn" class="md:hidden text-gray-700 hover:text-pink-500">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
            </div>
            
            <!-- Mobile Menu -->
            <div id="mobileMenu" class="hidden md:hidden mt-4 pb-4 border-t pt-4">
                <div class="flex flex-col space-y-4">
                    <a href="index.html" class="text-gray-700 hover:text-pink-500 transition-colors font-medium">
                        <i class="fas fa-home mr-2"></i>Home
                    </a>
                    <a href="loja.html" class="text-pink-500 font-semibold">
                        <i class="fas fa-store mr-2"></i>Loja
                    </a>
                    <a href="portfolio.html" class="text-gray-700 hover:text-pink-500 transition-colors font-medium">
                        <i class="fas fa-images mr-2"></i>Portf√≥lio
                    </a>
                    <a href="sobre.html" class="text-gray-700 hover:text-pink-500 transition-colors font-medium">
                        <i class="fas fa-user mr-2"></i>Sobre
                    </a>
                    <a href="contato.html" class="text-gray-700 hover:text-pink-500 transition-colors font-medium">
                        <i class="fas fa-envelope mr-2"></i>Contato
                    </a>
            </div>
        </div>
    </nav>
    </header>

    <!-- ===== MAIN CONTENT ===== -->
    <main class="container mx-auto px-4 py-8">
    <!-- Hero Section -->
        <section class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">
                Nossa <span class="logo-text">Loja</span>
            </h1>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                Produtos √∫nicos e personalizados para registrar suas mem√≥rias mais especiais.
                Cada pe√ßa √© feita com carinho e aten√ß√£o aos detalhes.
            </p>
        </section>

        <!-- Filter Section -->
        <section class="mb-8">
            <div class="flex flex-wrap items-center justify-center gap-4">
                <button onclick="filterProducts('all')" class="filter-btn active bg-pink-500 text-white px-6 py-2 rounded-full font-medium transition-all hover:bg-pink-600">
                    <i class="fas fa-th mr-2"></i>Todos
                </button>
                <button onclick="filterProducts('albuns')" class="filter-btn bg-white text-gray-700 px-6 py-2 rounded-full font-medium transition-all hover:bg-pink-50 border">
                    <i class="fas fa-book mr-2"></i>√Ålbuns
                </button>
                <button onclick="filterProducts('scrapbook')" class="filter-btn bg-white text-gray-700 px-6 py-2 rounded-full font-medium transition-all hover:bg-pink-50 border">
                    <i class="fas fa-heart mr-2"></i>Scrapbook
                </button>
                <button onclick="filterProducts('convites')" class="filter-btn bg-white text-gray-700 px-6 py-2 rounded-full font-medium transition-all hover:bg-pink-50 border">
                    <i class="fas fa-envelope mr-2"></i>Convites
                </button>
        </div>
    </section>

    <!-- Products Grid -->
        <section id="productsSection">
            <!-- Loading State -->
            <div id="loadingState" class="flex items-center justify-center py-16">
                <div class="text-center">
                    <div class="loading-spinner mx-auto mb-4"></div>
                    <p class="text-gray-600 text-lg">Carregando produtos...</p>
                </div>
            </div>
            
            <!-- Products Grid -->
            <div id="productsGrid" class="hidden grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Products will be rendered here -->
            </div>
            
            <!-- Empty State -->
            <div id="emptyState" class="hidden text-center py-16">
                <div class="bg-white rounded-2xl p-12 shadow-lg max-w-md mx-auto">
                    <i class="fas fa-box-open text-6xl text-gray-300 mb-6"></i>
                    <h3 class="text-2xl font-bold text-gray-700 mb-4">Nenhum produto encontrado</h3>
                    <p class="text-gray-500 mb-6">
                        Nossos produtos est√£o sendo organizados. Volte em breve para ver nossas novidades!
                    </p>
                    <a href="contato.html" class="btn-primary text-white px-6 py-3 rounded-lg font-medium inline-block">
                        <i class="fas fa-envelope mr-2"></i>Entre em Contato
                        </a>
                    </div>
                </div>
                
            <!-- Error State -->
            <div id="errorState" class="hidden text-center py-16">
                <div class="bg-white rounded-2xl p-12 shadow-lg max-w-md mx-auto">
                    <i class="fas fa-exclamation-triangle text-6xl text-red-300 mb-6"></i>
                    <h3 class="text-2xl font-bold text-gray-700 mb-4">Ops! Algo deu errado</h3>
                    <p class="text-gray-500 mb-6">
                        N√£o foi poss√≠vel carregar os produtos. Tente recarregar a p√°gina.
                    </p>
                    <button onclick="loadProducts()" class="btn-primary text-white px-6 py-3 rounded-lg font-medium">
                        <i class="fas fa-redo mr-2"></i>Tentar Novamente
                    </button>
            </div>
        </div>
    </section>
    </main>

    <!-- ===== FOOTER ===== -->
    <footer class="bg-white/80 backdrop-blur-md mt-16">
        <div class="container mx-auto px-4 py-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-bold logo-text mb-4">Ateli√™ da Lele</h3>
                    <p class="text-gray-600">
                        Criando mem√≥rias especiais atrav√©s de produtos √∫nicos e personalizados.
                    </p>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">Links R√°pidos</h4>
                    <div class="space-y-2">
                        <a href="index.html" class="block text-gray-600 hover:text-pink-500 transition-colors">Home</a>
                        <a href="loja.html" class="block text-gray-600 hover:text-pink-500 transition-colors">Loja</a>
                        <a href="portfolio.html" class="block text-gray-600 hover:text-pink-500 transition-colors">Portf√≥lio</a>
                        <a href="contato.html" class="block text-gray-600 hover:text-pink-500 transition-colors">Contato</a>
                    </div>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">Redes Sociais</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-600 hover:text-pink-500 transition-colors text-xl">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="text-gray-600 hover:text-pink-500 transition-colors text-xl">
                            <i class="fab fa-facebook"></i>
                        </a>
                        <a href="#" class="text-gray-600 hover:text-pink-500 transition-colors text-xl">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-200 mt-8 pt-8 text-center">
                <p class="text-gray-600">
                    ¬© 2024 Ateli√™ da Lele. Todos os direitos reservados.
                </p>
            </div>
        </div>
    </footer>

    <script>
        // =============================================
        // SISTEMA DE PRODUTOS - NOVA LOJA LIMPA
        // =============================================
        
        let allProducts = [];
        let filteredProducts = [];
        let currentFilter = 'all';
        
        // ===== INICIALIZA√á√ÉO =====
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Nova Loja Carregada - Sistema Limpo!');
            
            // Inicializa menu mobile
            setupMobileMenu();
            
            // Carrega produtos
            loadProducts();
        });
        
        // ===== MENU MOBILE =====
        function setupMobileMenu() {
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileMenu = document.getElementById('mobileMenu');
            
            if (mobileMenuBtn && mobileMenu) {
                mobileMenuBtn.addEventListener('click', function() {
                    mobileMenu.classList.toggle('hidden');
                });
            }
        }
        
        // ===== CARREGAMENTO DE PRODUTOS =====
        async function loadProducts() {
            console.log('üì¶ Carregando produtos do localStorage...');
            
            showLoadingState();
            
            try {
                // Simula um pequeno delay para UX
                await new Promise(resolve => setTimeout(resolve, 500));
                
                // Carrega produtos do localStorage (mesmo sistema do admin)
                const productsData = localStorage.getItem('atelieProducts');
                
                if (productsData) {
                    allProducts = JSON.parse(productsData);
                    console.log(`‚úÖ ${allProducts.length} produtos carregados do localStorage`);
                } else {
                    console.log('üìù Usando produtos padr√£o...');
                    allProducts = getDefaultProducts();
                    // Salva produtos padr√£o
                    localStorage.setItem('atelieProducts', JSON.stringify(allProducts));
                }
                
                // Filtra apenas produtos ativos
                const activeProducts = allProducts.filter(product => 
                    product.status === 'ativo' || !product.status
                );
                
                console.log(`üéØ ${activeProducts.length} produtos ativos encontrados`);
                
                if (activeProducts.length === 0) {
                    showEmptyState();
                    return;
                }
                
                // Aplica filtro atual
                applyFilter(currentFilter);
                
                console.log('‚ú® Produtos carregados com sucesso!');
                
            } catch (error) {
                console.error('‚ùå Erro ao carregar produtos:', error);
                showErrorState();
            }
        }
        
        // ===== PRODUTOS PADR√ÉO =====
        function getDefaultProducts() {
            return [
                {
                    id: 'album-personalizado',
                    name: '√Ålbum de Fotos Personalizado',
                    description: '√Ålbum de fotos personalizado com capa decorada e p√°ginas tem√°ticas.',
                    price: 45.00,
                    category: 'albuns',
                    status: 'ativo',
                    shopeeLink: 'https://shopee.com.br/album-personalizado',
                    images: []
                },
                {
                    id: 'scrapbook-romantico',
                    name: 'Scrapbook Rom√¢ntico',
                    description: 'Scrapbook tem√°tico para casais com decora√ß√µes rom√¢nticas.',
                    price: 65.00,
                    category: 'scrapbook',
                    status: 'ativo',
                    shopeeLink: 'https://shopee.com.br/scrapbook-romantico',
                    images: []
                },
                {
                    id: 'convite-casamento',
                    name: 'Convite de Casamento',
                    description: 'Convite de casamento elegante com acabamento especial.',
                    price: 8.50,
                    category: 'convites',
                    status: 'ativo',
                    shopeeLink: 'https://shopee.com.br/convite-casamento',
                    images: []
                }
            ];
        }
        
        // ===== FILTROS =====
        function filterProducts(category) {
            currentFilter = category;
            
            // Atualiza bot√µes de filtro
            updateFilterButtons(category);
            
            // Aplica filtro
            applyFilter(category);
        }
        
        function updateFilterButtons(activeCategory) {
            const filterBtns = document.querySelectorAll('.filter-btn');
            
            filterBtns.forEach(btn => {
                btn.classList.remove('active', 'bg-pink-500', 'text-white');
                btn.classList.add('bg-white', 'text-gray-700', 'border');
            });
            
            const activeBtn = document.querySelector(`[onclick="filterProducts('${activeCategory}')"]`);
            if (activeBtn) {
                activeBtn.classList.remove('bg-white', 'text-gray-700', 'border');
                activeBtn.classList.add('active', 'bg-pink-500', 'text-white');
            }
        }
        
        function applyFilter(category) {
            const activeProducts = allProducts.filter(product => 
                product.status === 'ativo' || !product.status
            );
            
            if (category === 'all') {
                filteredProducts = activeProducts;
            } else {
                filteredProducts = activeProducts.filter(product => 
                    product.category === category
                );
            }
            
            renderProducts();
        }
        
        // ===== RENDERIZA√á√ÉO =====
        function renderProducts() {
            const productsGrid = document.getElementById('productsGrid');
            
            if (filteredProducts.length === 0) {
                showEmptyState();
                return;
            }
            
            // Limpa grid
            productsGrid.innerHTML = '';
            
            // Renderiza cada produto
            filteredProducts.forEach(product => {
                const productCard = createProductCard(product);
                productsGrid.appendChild(productCard);
            });
            
            showProductsGrid();
        }
        
        function createProductCard(product) {
            const card = document.createElement('div');
            card.className = 'product-card bg-white rounded-2xl shadow-lg overflow-hidden';
            
            // Obt√©m melhor imagem
            const imageUrl = getBestImage(product);
            
            card.innerHTML = `
                <div class="relative">
                    ${imageUrl ? 
                        `<img src="${imageUrl}" alt="${product.name}" class="w-full h-64 object-cover">` :
                        `<div class="w-full h-64 image-placeholder flex items-center justify-center">
                            <i class="fas fa-image text-4xl text-gray-400"></i>
                         </div>`
                    }
                    <div class="absolute top-4 right-4">
                        <span class="bg-pink-500 text-white px-3 py-1 rounded-full text-sm font-medium">
                            ${formatCategory(product.category)}
                        </span>
                    </div>
                </div>
                
                <div class="p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-2">${product.name}</h3>
                    <p class="text-gray-600 mb-4 line-clamp-2">${product.description}</p>
                    
                    <div class="flex items-center justify-between">
                        <div class="text-2xl font-bold text-pink-500">
                            R$ ${product.price.toFixed(2).replace('.', ',')}
                        </div>
                        
                        ${product.shopeeLink ? 
                            `<a href="${product.shopeeLink}" target="_blank" class="btn-primary text-white px-6 py-2 rounded-lg font-medium inline-flex items-center">
                            <i class="fas fa-shopping-bag mr-2"></i>
                            Ver na Shopee
                             </a>` :
                            `<button class="bg-gray-300 text-gray-600 px-6 py-2 rounded-lg font-medium cursor-not-allowed">
                                <i class="fas fa-clock mr-2"></i>
                                Em Breve
                             </button>`
                        }
                    </div>
                </div>
            `;
            
            return card;
        }

        // ===== UTILIT√ÅRIOS =====
        function getBestImage(product) {
            // Verifica se tem imagens
            if (product.images && product.images.length > 0) {
                // Procura pela imagem prim√°ria
                const primaryImage = product.images.find(img => img.primary);
                if (primaryImage && primaryImage.src) {
                    return primaryImage.src;
                }
                
                // Se n√£o tem prim√°ria, usa a primeira
                if (product.images[0] && product.images[0].src) {
                    return product.images[0].src;
                }
            }
            
            // Verifica primarySrc (sistema antigo)
            if (product.primarySrc) {
                return product.primarySrc;
            }
            
            return null;
        }
        
        function formatCategory(category) {
            const categories = {
                'albuns': '√Ålbuns',
                'scrapbook': 'Scrapbook',
                'convites': 'Convites'
            };
            
            return categories[category] || 'Produto';
        }
        
        // ===== ESTADOS DA UI =====
        function showLoadingState() {
            document.getElementById('loadingState').classList.remove('hidden');
            document.getElementById('productsGrid').classList.add('hidden');
            document.getElementById('emptyState').classList.add('hidden');
            document.getElementById('errorState').classList.add('hidden');
        }
        
        function showProductsGrid() {
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('productsGrid').classList.remove('hidden');
            document.getElementById('emptyState').classList.add('hidden');
            document.getElementById('errorState').classList.add('hidden');
        }
        
        function showEmptyState() {
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('productsGrid').classList.add('hidden');
            document.getElementById('emptyState').classList.remove('hidden');
            document.getElementById('errorState').classList.add('hidden');
        }
        
        function showErrorState() {
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('productsGrid').classList.add('hidden');
            document.getElementById('emptyState').classList.add('hidden');
            document.getElementById('errorState').classList.remove('hidden');
        }
        
        // ===== DEBUG (Remov√≠vel em produ√ß√£o) =====
        window.debugStore = function() {
            console.log('=== DEBUG NOVA LOJA ===');
            console.log('Todos os produtos:', allProducts);
            console.log('Produtos filtrados:', filteredProducts);
            console.log('Filtro atual:', currentFilter);
            
            // Testa imagens
            allProducts.forEach(product => {
                const imageUrl = getBestImage(product);
                console.log(`${product.name}: ${imageUrl ? 'TEM IMAGEM' : 'SEM IMAGEM'}`);
            });
        }
        
        // Exposi√ß√£o global para debug
        window.loadProducts = loadProducts;
        window.filterProducts = filterProducts;
        
        console.log('‚ú® Nova Loja Inicializada - Sistema Limpo e Moderno!');
    </script>
</body>
</html>
